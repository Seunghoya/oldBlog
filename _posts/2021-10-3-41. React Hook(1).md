---
layout: single
title: "[React] React Hook(1)"
tag: React, TIL
---

# React Hook(1)



### Side Effect & Pure Function

í•¨ìˆ˜ ë‚´ì—ì„œ ì–´ë–¤ êµ¬í˜„ì´ í•¨ìˆ˜ ì™¸ë¶€ì— ì˜í–¥ì„ ë¼ì¹˜ëŠ” ê²½ìš° í•´ë‹¹ í•¨ìˆ˜ëŠ” Side Effectê°€ ìˆë‹¤ê³  ì´ì•¼ê¸° í•œë‹¤. Side EffectëŠ” í”„ë¡œê·¸ë¨ì˜ ë²„ê·¸ê°€ ë°œìƒí•˜ê¸° ì‰½ê²Œ í•œë‹¤.<br>

ìˆœìˆ˜ í•¨ìˆ˜(Pure Function)ì€ ì´ëŸ° ë¶€ì‘ìš©(Side Effect)ê°€ ì—†ëŠ” í•¨ìˆ˜ë¥¼ ë§í•œë‹¤. ì¦‰, í•¨ìˆ˜ì˜ ì‹¤í–‰ì´ ì™¸ì— ì˜í–¥ì„ ë¼ì¹˜ì§€ ì•ŠëŠ” í•¨ìˆ˜ë¥¼ ë§í•œë‹¤. ë”°ë¼ì„œ ìˆœìˆ˜ í•¨ìˆ˜ëŠ” [ìŠ¤ë ˆë“œ ì•ˆì „](https://ko.wikipedia.org/wiki/%EC%8A%A4%EB%A0%88%EB%93%9C_%EC%95%88%EC%A0%84)í•˜ê³  ë³‘ë ¥ì ì¸ ê³„ì‚°ì´ ê°€ëŠ¥í•˜ë‹¤. 

```js
let foo = 'hello';

function bar() {
  foo = 'world';
}

bar(); // barëŠ” Side Effectë¥¼ ë°œìƒì‹œí‚µë‹ˆë‹¤!
-------------------------------------------
  
function upper(str) {
  return str.toUpperCase(); // toUpperCase ë©”ì†Œë“œëŠ” ì›ë³¸ì„ ìˆ˜ì •í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤ (Immutable)
}

upper('hello') // 'HELLO'
```



ì•ì„œ ê³µë¶€í•œ Reactì˜ í•¨ìˆ˜ ì»´í¬ë„ŒíŠ¸ëŠ” propsê°€ ì…ë ¥ìœ¼ë¡œ, JSX Elementê°€ ì¶œë ¥ìœ¼ë¡œ ë‚˜ê°„ë‹¤. ì—¬ê¸°ì—ëŠ” Side Effectê°€ ì—†ëŠ” ìˆœìˆ˜ í•¨ìˆ˜ë¡œ ì‘ë™í•œë‹¤. í•˜ì§€ë§Œ, ë³´í†µ React ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‘ì„±í•  ë•ŒëŠ” Ajaxìš”ì²­ì´ í•„ìš”í•˜ê±°ë‚˜, LocalStorage ë˜ëŠ” íƒ€ì´ë¨¸ì™€ ê°™ì€ Reactì™€ ìƒê´€ì—†ëŠ” APIë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ê°€ ë°œìƒí•  ìˆ˜ ìˆë‹¤. ì´ëŠ” ì „ë¶€ Side Effectì´ë‹¤. ReactëŠ” Side Effectë¥¼ ë‹¤ë£¨ê¸° ìœ„í•œ Hookì¸ Effect Hookì„ ì œê³µí•œë‹¤. 



### Hook?

Hookì€ í´ë˜ìŠ¤ ì»´í¬ë„ŒíŠ¸ë¥¼ ì‘ì„±í•˜ì§€ ì•Šì•„ë„ stateì™€ ê°™ì€ íŠ¹ì§•ë“¤ì„ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” í•¨ìˆ˜ ì»´í¬ë„ŒíŠ¸ì´ë‹¤. Hookì„ ì´ìš©í•¨ìœ¼ë¡œì„œ props, state, context, refs ê·¸ë¦¬ê³  lifecycleì™€ ê°™ì€ Reactê°œë…ì— ì¢€ ë” ì§ê´€ì ì¸ APIë¥¼ ì œê³µí•œë‹¤.  <br>

ì•„ë˜ ì—ì œëŠ” classë¥¼ ì‚¬ìš©í•œ react ì˜ˆì œì´ë‹¤.

```jsx
class Example extends React.Component {
  constructor(props) {
    super(props);
    this.state = {
      count: 0
    };
  }

  render() {
    return (
      <div>
        <p>You clicked {this.state.count} times</p>
        <button onClick={() => this.setState({ count: this.state.count + 1 })}>
          Click me
        </button>
      </div>
    );
  }
}
```

ìœ„ ì˜ˆì œì—ì„œ stateëŠ” `{ count: 0}`ì´ë©° ì‚¬ìš©ìê°€ `this.setState()`ë¥¼ í˜¸ì¶œí•˜ëŠ” ë²„íŠ¼ì„ í´ë¦­í–ˆì„ ë•Œ `state.count`ë¥¼ ì¦ê°€ì‹œí‚¨ë‹¤. 

ë°˜ë©´ ë¦¬ì•¡íŠ¸ì—ì„œ í•¨ìˆ˜ ì»´í¬ë„ŒíŠ¸ëŠ” ì•„ë˜ì™€ ê°™ì´ ìƒê²¼ë‹¤.

```jsx
const Example = (props) => {
  // ì—¬ê¸°ì„œ Hookì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤!
  return <div />;
}
// ë˜ëŠ”
function Example(props) {
  // ì—¬ê¸°ì„œ Hookì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤!
  return <div />;
}

// âš ï¸ **Hook**ì€ `class` ì•ˆì—ì„œëŠ” ë™ì‘í•˜ì§€ ì•ŠëŠ”ë‹¤.
```



### Hook ì‚¬ìš© ê·œì¹™

**Hook**ì€ 2ê°€ì§€ ê·œì¹™ì„ ì¤€ìˆ˜í•´ì•¼í•©ë‹ˆë‹¤.

- ìµœìƒìœ„(at the top level)ì—ì„œë§Œ Hookì„ í˜¸ì¶œí•´ì•¼ í•œë‹¤.

  - ë°˜ë³µë¬¸, ì¡°ê±´ë¬¸, ì¤‘ì²©ëœ í•¨ìˆ˜ë‚´ì—ì„œëŠ” **Hook**ì„ ì‚¬ìš©í•˜ë©´ ì•ˆëœë‹¤.

- react í•¨ìˆ˜ ì»´í¬ë„ŒíŠ¸ ë‚´ì—ì„œë§Œ Hookì„ í˜¸ì¶œí•´ì•¼ í•œë‹¤.

  - ì¼ë°˜ JavaScript í•¨ìˆ˜ì—ì„œ **Hook**ì„ í˜¸ì¶œí•˜ë©´ ì•ˆëœë‹¤.
  - ê·¸ëŸ¬ë‚˜ **custom Hook** ì•ˆì—ì„œëŠ” **Hook** í˜¸ì¶œì´ ê°€ëŠ¥í•˜ë‹¤.

  <br>

> âš ï¸ **reactëŠ” ìµœìƒìœ„ì— Hookì„ í˜¸ì¶œí•˜ì§€ ì•ŠëŠ” ê²½ìš°, ì˜ëª»ëœ ê²°ê³¼ë¥¼ ì´ˆë˜í•œë‹¤.**
> reactê°€ **Hook**ì´ í˜¸ì¶œë˜ëŠ” ìˆœì„œì— ì˜ì¡´í•˜ê¸° ë•Œë¬¸ì´ë‹¤.
>
> reactëŠ” **Hookì˜ í˜¸ì¶œìˆœ**ìœ¼ë¡œ ì–´ë–¤ `state` ì—°ë™í•˜ëŠ”ì§€ í™•ì¸í•œë‹¤.
>
> ì•„ë˜ì˜ ì»´í¬ë„ŒíŠ¸ëŠ” ì²«ë²ˆì§¸ ëœë”ë§ì‹œ `name !== ''` ì´ `true`ë¡œ ì‘ë™í•˜ì—¬ ì œëŒ€ë¡œ ì‘ë™í•˜ì§€ë§Œ
> ê·¸ë‹¤ìŒ ë Œë”ë§ì—ì„œ í¼ì„ ì´ˆê¸°í™”í•˜ë©´ì„œ ì¡°ê±´ `name !== ''`ì´ `false`ë¡œ ì‘ë™ëœë‹¤ë©´ ì˜¤ë¥˜ê°€ ë°œìƒí•œë‹¤.
>
> ```jsx
> function Form() {
>   // nameì´ë¼ëŠ” state ë³€ìˆ˜ë¥¼ ì‚¬ìš©
>   const [name, setName] = useState('Mary');
> 
>   /* ===== ğŸ”´ Hookì„ ê±´ë„ˆë›°ì—ˆìŠµë‹ˆë‹¤! ===== */
>   if(name !== '') {                                                   
>     // Effectë¥¼ ì‚¬ìš©í•´ í¼ ë°ì´í„°ë¥¼ ì €ì¥
>     useEffect(function persistForm() {
>       localStorage.setItem('formData', name);
>     });
>   }
>   
>   /* ==== ğŸ”´ surname state ë³€ìˆ˜ë¥¼ ì½ëŠ” ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ==== */
>   // surnameì´ë¼ëŠ” state ë³€ìˆ˜ë¥¼ ì‚¬ìš©
>   const [surname, setSurname] = useState('Poppins');
> 
>   /* ==== ğŸ”´ ì œëª©ì„ ì—…ë°ì´íŠ¸í•˜ê¸° ìœ„í•œ effectê°€ ëŒ€ì²´ë˜ëŠ” ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ==== */
>   // Effectë¥¼ ì‚¬ìš©í•´ì„œ title ë¥¼ ì—…ë°ì´íŠ¸
>   useEffect(function updateTitle() {
>     document.title = name + ' ' + surname;
>   });
> 
>   // ...
> }
> ```
>
> ìœ„ì—ì„œ ì§€ì—­ì— ìµœìƒìœ„ì— **Hook**ì„ í˜¸ì¶œí•˜ì§€ ì•Šì•˜ìœ¼ë©° **Hook**ì„ ê±´ë„ˆë›´ ë¶€ë¶„ì´ ì¡´ì¬í•©ë‹ˆë‹¤.
> ì´ë¡œ ì¸í•´ **Hook**ì˜ í˜¸ì¶œ ìˆœì„œê°€ ë‹¬ë¼ì§€ê²Œ ëœë‹¤.
> reactëŠ” ë‘ë²ˆì§¸ `useEffect()` í˜¸ì¶œì´ ë‚˜ì˜¬ ê²ƒìœ¼ë¡œ ì˜ˆìƒí–ˆì§€ë§Œ `useState('Poppins')` í˜¸ì¶œë¨ìœ¼ë¡œì„œ ë²„ê·¸ê°€ ë°œìƒëœë‹¤.

<br>

# State Hook ì‚¬ìš©í•˜ê¸°

### state ë³€ìˆ˜ ì„ ì–¸í•˜ê¸°

í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•  ë•Œ  constructor ì•ˆì—ì„œ `this.state`ë¥¼ `{ count: 0 }`ë¡œ ì„¤ì •í•¨ìœ¼ë¡œì¨ `count`ë¥¼ `0`ìœ¼ë¡œ ì´ˆê¸°í™”í–ˆë‹¤.

```jsx
class Example extends React.Component {
  constructor(props) {
    super(props);
    this.state = {
      count: 0
    };
  }
```

í•¨ìˆ˜ ì»´í¬ë„ŒíŠ¸ëŠ” `this`ë¥¼ ê°€ì§ˆ ìˆ˜ ì—†ê¸° ë•Œë¬¸ì— `this.state`ë¥¼ í• ë‹¹í•˜ê±°ë‚˜ ì½ì„ ìˆ˜ ì—†ë‹¤. ëŒ€ì‹  **useState Hook**ì„ ì§ì ‘ ì»´í¬ë„ŒíŠ¸ì— í˜¸ì¶œí•œë‹¤.

```jsx
// react ì—ì„œ useState ë¥¼ import í•´ì•¼í•œë‹¤.
import React, { useState } from 'react';

function Example {
  // ES6ì˜ ë°°ì—´ êµ¬ì¡° ë¶„í•´(destructuring) ì‚¬ìš©
  const [STATE_ëª…, setSTATE_ëª…] = useState(ì´ˆê¸°_STATE_ê°’)
  // const STATE_ëª… = useState(ì´ˆê¸°_STATE_ê°’)[0]
  // conse setSTATE_ëª… = useState(ì´ˆê¸°_STATE_ê°’)[1]

  /* ì—¬ëŸ¬ê°œì˜ State Hookì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. */
  const [STATE_1, setSTATE_1] = useState(1);
  const [STATE_2, setSTATE_2] = useState(2);
  // ...
```

ì´ë¥¼ ë°”íƒ•ìœ¼ë¡œ ìœ„ì— ì‘ì„±ëœ í´ë˜ìŠ¤ ë¬¸ë²•ì„ useStateë¡œ ì‘ì„±í•´ë³´ì.

```jsx
import React, { useState } from 'react';

function Example() {
  // const ë¼ëŠ” state ìƒì„±
  // setCount() ë¼ëŠ” setState() ìƒì„±
  // countëŠ” 0ìœ¼ë¡œ ì´ˆê¸°í™”
  const [count, setCount] = useState(0);
```

<br>

### state ê°€ì ¸ì˜¤ê¸°

í´ë˜ìŠ¤ ì»´í¬ë„ŒíŠ¸ëŠ” countë¥¼ ë³´ì—¬ì£¼ê¸° ìœ„í•´ `this.state.count`ë¥¼ ì‚¬ìš©í–ˆì§€ë§Œ í•¨ìˆ˜ ì»´í¬ë„ŒíŠ¸ëŠ” `count`ë¥¼ ì§ì ‘ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

```jsx
// class
	<p>You clicked {this.state.count} times</p>

// í•¨ìˆ˜ ì»´í¬ë„ŒíŠ¸
  <p>You clicked {count} times</p>
```

<br>

### state ê°±ì‹ í•˜ê¸°

í´ë˜ìŠ¤ ì»´í¬ë„ŒíŠ¸ëŠ” `count`ë¥¼ ê°±ì‹ í•˜ê¸° ìœ„í•´ `this.setState()`ë¥¼ í˜¸ì¶œí–ˆì§€ë§Œ, í•¨ìˆ˜ ì»´í¬ë„ŒíŠ¸ëŠ” `setCount`ì™€ `count` ë³€ìˆ˜ë¥¼ ê°€ì§€ê³  ìˆìœ¼ë¯€ë¡œ `this`ë¥¼ í˜¸ì¶œí•˜ì§€ ì•Šì•„ë„ ëœë‹¤.

```jsx
// class
	<button onClick={() => this.setState({ count: this.state.count + 1 })}>
  Click me
  </button>

// í•¨ìˆ˜ ì»´í¬ë„ŒíŠ¸
  <button onClick={() => setCount(count + 1)}>    Click me
  </button>
```

<br>

**ğŸ“– `useState()` vs `this.state`**

`state` ë³€í™”ì‹œ ë³‘í•©í•˜ì—¬ ì•„ë˜ì™€ ê°™ì´ ë™ì‘í•œë‹¤.

- `useState`: ë³€í™”ëœ `state`ë¥¼ *ëŒ€ì²´* í•¨
- `this.state`: ë³€í™”ëœ `state`ë¥¼ ê°±ì‹  í˜¹ì€ ë³‘í•©í•¨



<br>



